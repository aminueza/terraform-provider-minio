---
page_title: "minio_accesskey Resource - terraform-provider-minio"
subcategory: ""
description: |-
---

# minio_accesskey (Resource)

## Example Usage

```terraform
# Create a user first
resource "minio_iam_user" "example_user" {
  name = "example-user"
}

# Create an access key with default settings (auto-generated keys, enabled)
resource "minio_accesskey" "example" {
  user = minio_iam_user.example_user.name
}

# Create an access key with custom credentials
resource "minio_accesskey" "custom_key" {
  user               = minio_iam_user.example_user.name
  access_key         = "MINIO_ACCESS_KEY" # Must be 8-20 characters
  secret_key         = "mySuperSecretKey" # Must be at least 8 characters
  secret_key_version = "v1"               # Version identifier for change detection
  status            = "enabled"
}

# Create a disabled access key
resource "minio_accesskey" "disabled_key" {
  user   = minio_iam_user.example_user.name
  status = "disabled"
}

# Create an access key with a description
resource "minio_accesskey" "with_description" {
  user        = minio_iam_user.example_user.name
  description = "CI/CD deployment key"
}

# Create an access key and attach a policy directly (policy name or JSON)
resource "minio_accesskey" "with_policy" {
  user               = minio_iam_user.example_user.name
  access_key         = "EXAMPLEKEY1"
  secret_key         = "mySuperSecretKey"
  secret_key_version = "v1"
  status             = "enabled"
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

- `user` (String) The user for whom the access key is managed.

### Optional

- `access_key` (String) The access key. If provided, must be between 8 and 20 characters.
- `description` (String) Description for the access key (max 256 characters).
- `policy` (String) Policy to attach to the access key (policy name or JSON document).
- `secret_key` (String, Sensitive) The secret key. If provided, must be at least 8 characters. This is a write-only field and will not be stored in state.
- `secret_key_version` (String) Version identifier for the secret key. Change this value to trigger a secret key rotation. Can be a hash, version number, timestamp, or any string that changes when the secret changes.
- `status` (String) The status of the access key (enabled/disabled).
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--timeouts"></a>

### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `read` (String)
- `update` (String)

## Import

Import is supported using the following syntax:

```shell
# Access keys can be imported using the access key ID
terraform import minio_accesskey.example AKIAIOSFODNN7EXAMPLE
```

## Security Note

The `secret_key` is intentionally designed as write-only to avoid persisting sensitive credentials in Terraform state files. It is never exposed in state or outputs, including at creation time. When you provide a custom secret key, you must also provide a `secret_key_version` to enable change detection without storing the actual secret.

### Secret Key Rotation

To rotate a secret key:

1. Update both `secret_key` and `secret_key_version` in your configuration
2. Run `terraform apply`
3. The new secret will be set, but not stored in state

### Integration with Secret Management Systems

This design is particularly useful for integrating with secret management systems:

**HashiCorp Vault KV V2:**

```hcl
data "vault_kv_secret_v2" "minio_secret" {
  mount = "secret"
  name  = "minio/accesskey"
}

resource "minio_accesskey" "example" {
  user               = minio_iam_user.example_user.name
  secret_key         = data.vault_kv_secret_v2.minio_secret.data["secret_key"]
  secret_key_version = tostring(data.vault_kv_secret_v2.minio_secret.version)
}
```

**Using a hash for version tracking:**

```hcl
resource "minio_accesskey" "example" {
  user               = minio_iam_user.example_user.name
  secret_key         = var.secret_key
  secret_key_version = sha256(var.secret_key)
}
```
