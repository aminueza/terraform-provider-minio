---
page_title: "minio_ilm_policy Resource - terraform-provider-minio"
subcategory: ""
description: |-
  minio_ilm_policy handles lifecycle settings for a given minio_s3_bucket.
---

# minio_ilm_policy (Resource)

`minio_ilm_policy` handles lifecycle settings for a given `minio_s3_bucket`.

## Example Usage

```terraform
resource "minio_s3_bucket" "bucket" {
  bucket = "bucket"
}

resource "minio_ilm_policy" "test_policy" {
  bucket = minio_s3_bucket.bucket.bucket

  rule {
    id     = "rule1"
    status = "Enabled"
    expiration = "90d"
    filter     = "documents/"
    tags = {
      environment = "test"
      type        = "document"
    }
  }

  rule {
    id     = "rule2"
    status = "Disabled"
    transition {
      days          = "30d"
      storage_class = "GLACIER"
    }
    filter = "backups/"
  }

  rule {
    id = "rule3"
    transition {
      date          = "2025-12-31"  # Example: transition on a specific date
      storage_class = "STANDARD_IA"
    }
    filter = "archives/"
  }

  rule {
    id = "rule4"
    noncurrent_transition {
      days           = "45d"
      storage_class  = "GLACIER"
      newer_versions = 3
    }
    filter = "versioned-data/"
  }

  rule {
    id = "rule5"
    noncurrent_expiration {
      days           = "365d"
      newer_versions = 5
    }
    filter = "old-versions/"
  }

  rule {
    id = "rule6"
    transition {
      days          = "60d"
      storage_class = "STANDARD_IA"
    }
    expiration = "180d"
    filter     = "logs/"
    tags = {
      retention = "short-term"
      type      = "logs"
    }
  }
}
```

## Limitations

Abort-only lifecycle rules are not persisted by the MinIO server. If you configure a rule with only `abort_incomplete_multipart_upload`, the provider preserves that rule in Terraform state to avoid perpetual diffs, but it is not sent to the server. Combine it with at least one other action (e.g., `expiration` or `transition`) to persist on the server.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket` (String)
- `rule` (Block List, Min: 1) (see [below for nested schema](#nestedblock--rule))

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--rule"></a>
### Nested Schema for `rule`

Required:

- `id` (String)

Optional:

- `abort_incomplete_multipart_upload` (Block List, Max: 1) (see [below for nested schema](#nestedblock--rule--abort_incomplete_multipart_upload))
- `expiration` (String) Value may be duration (5d), date (1970-01-01), or "DeleteMarker" to expire delete markers if `noncurrent_version_expiration_days` is used
- `filter` (String)
- `noncurrent_expiration` (Block List, Max: 1) (see [below for nested schema](#nestedblock--rule--noncurrent_expiration))
- `noncurrent_transition` (Block List, Max: 1) (see [below for nested schema](#nestedblock--rule--noncurrent_transition))
- `status` (String) Status of the rule. Can be either 'Enabled' or 'Disabled'. Defaults to 'Enabled'.
- `tags` (Map of String)
- `transition` (Block List, Max: 1) (see [below for nested schema](#nestedblock--rule--transition))

<a id="nestedblock--rule--abort_incomplete_multipart_upload"></a>
### Nested Schema for `rule.abort_incomplete_multipart_upload`

Required:

- `days_after_initiation` (String) Number of days after which incomplete multipart uploads should be aborted, in format 'Nd'.


<a id="nestedblock--rule--noncurrent_expiration"></a>
### Nested Schema for `rule.noncurrent_expiration`

Required:

- `days` (String)

Optional:

- `newer_versions` (Number)


<a id="nestedblock--rule--noncurrent_transition"></a>
### Nested Schema for `rule.noncurrent_transition`

Required:

- `days` (String)
- `storage_class` (String)

Optional:

- `newer_versions` (Number)


<a id="nestedblock--rule--transition"></a>
### Nested Schema for `rule.transition`

Required:

- `storage_class` (String)

Optional:

- `date` (String)
- `days` (String)

## Import

Import is supported using the following syntax:

```shell
# ILM policies can be imported using the bucket name
terraform import minio_ilm_policy.example bucket-name
```
