---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "minio_s3_bucket_retention Resource - terraform-provider-minio"
subcategory: ""
description: |-
  Manages object lock retention settings for a MinIO bucket. Object locking enforces Write-Once Read-Many (WORM) immutability to protect versioned objects from deletion.
---

# minio_s3_bucket_retention (Resource)

Manages object lock retention settings for a MinIO bucket. Object locking enforces Write-Once Read-Many (WORM) immutability to protect versioned objects from deletion. This resource provides compliance with SEC17a-4(f), FINRA 4511(C), and CFTC 1.31(c)-(d) requirements.

-> **Note** Object locking can only be enabled during bucket creation and requires versioning. You cannot enable object locking on an existing bucket.

## Example Usage

### Basic Retention Configuration

```terraform
# First, create a bucket with object locking enabled
resource "minio_s3_bucket" "example" {
  bucket          = "my-bucket"
  force_destroy   = true
  object_locking  = true
}

# Configure retention with COMPLIANCE mode
resource "minio_s3_bucket_retention" "example" {
  bucket          = minio_s3_bucket.example.bucket
  mode            = "COMPLIANCE"
  unit            = "DAYS"
  validity_period = 30

}
```

### Governance Mode Configuration

```terraform
resource "minio_s3_bucket_retention" "governance_example" {
  bucket          = minio_s3_bucket.example.bucket
  mode            = "GOVERNANCE"
  unit            = "YEARS"
  validity_period = 1
}
```

## Interaction with Lifecycle Rules

If a bucket has lifecycle rules configured, the retention settings will take precedence. Objects cannot be deleted by lifecycle rules until their retention period expires. The provider will issue a warning if lifecycle rules are detected during retention configuration.

## Schema

### Required

- `bucket` (String) Name of the bucket to configure object locking. The bucket must be created with object locking enabled.
- `mode` (String) Retention mode for the bucket. Valid values are:
  - `GOVERNANCE`: Prevents object modification by non-privileged users. Users with s3:BypassGovernanceRetention permission can modify objects.
  - `COMPLIANCE`: Prevents any object modification by all users, including the root user, until retention period expires.
- `unit` (String) Time unit for the validity period. Valid values are `DAYS` or `YEARS`.
- `validity_period` (Number) Duration for which objects should be retained under WORM lock, in the specified unit. Must be a positive integer.

### Read-Only

- `id` (String) The ID of this resource.

## Import

Bucket retention configuration can be imported using the bucket name:

```shell
$ terraform import minio_s3_bucket_retention.example my-bucket
```