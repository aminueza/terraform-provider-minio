---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: ""
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Name}} ({{.Type}})

{{ .Description | trimspace }}

## Example Usage

```terraform
# Generate scrape configuration for cluster metrics
data "minio_prometheus_scrape_config" "cluster" {
  metric_type = "cluster"
  alias       = "minio-cluster"
}

# Generate scrape configuration for node metrics
data "minio_prometheus_scrape_config" "node" {
  metric_type = "node"
  alias       = "minio-nodes"
}

# Generate scrape configuration for bucket metrics with v2 metrics
data "minio_prometheus_scrape_config" "bucket" {
  metric_type      = "bucket"
  alias            = "minio-buckets"
  metrics_version  = "v2"
}

# Generate scrape configuration for resource metrics with bearer token
data "minio_prometheus_scrape_config" "resource" {
  metric_type  = "resource"
  alias        = "minio-resources"
  bearer_token = "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9..."
}
```

## Using with Bearer Token Resource

```terraform
# Create a bearer token for authenticated access
resource "minio_prometheus_bearer_token" "cluster_token" {
  metric_type = "cluster"
  expires_in  = "24h"
}

# Generate authenticated scrape configuration
data "minio_prometheus_scrape_config" "cluster_auth" {
  metric_type  = "cluster"
  alias        = "minio-cluster-auth"
  bearer_token = minio_prometheus_bearer_token.cluster_token.token
}

# Output the complete Prometheus configuration
output "prometheus_config" {
  value = data.minio_prometheus_scrape_config.cluster_auth.scrape_config
}
```

## Complete Prometheus Configuration Example

```terraform
# Generate scrape configs for all metric types
data "minio_prometheus_scrape_config" "cluster" {
  metric_type = "cluster"
  alias       = "minio-cluster"
}

data "minio_prometheus_scrape_config" "node" {
  metric_type = "node"
  alias       = "minio-nodes"
}

data "minio_prometheus_scrape_config" "bucket" {
  metric_type = "bucket"
  alias       = "minio-buckets"
}

data "minio_prometheus_scrape_config" "resource" {
  metric_type = "resource"
  alias       = "minio-resources"
}

# Combine all scrape configs
locals {
  prometheus_config = <<-EOT
    ${data.minio_prometheus_scrape_config.cluster.scrape_config}
    
    ${data.minio_prometheus_scrape_config.node.scrape_config}
    
    ${data.minio_prometheus_scrape_config.bucket.scrape_config}
    
    ${data.minio_prometheus_scrape_config.resource.scrape_config}
  EOT
}

output "complete_prometheus_config" {
  value = local.prometheus_config
}
```

{{ .SchemaMarkdown | trimspace }}

## Metric Types

- **cluster**: Cluster-level metrics including server status, usage, and performance
- **node**: Node-specific metrics for individual MinIO servers in a cluster
- **bucket**: Bucket-level metrics including object counts, sizes, and operations
- **resource**: Resource utilization metrics for CPU, memory, and disk

## Metrics Versions

- **v2**: Legacy metrics format (`/minio/v2/metrics/{type}`)
- **v3**: Current metrics format (`/minio/metrics/v3?type={type}`) - default

## Authentication

The data source supports both unauthenticated and authenticated access:

1. **Unauthenticated**: Omit the `bearer_token` field for public metrics endpoints
2. **Authenticated**: Provide a JWT bearer token for secure metrics access

Use the `minio_prometheus_bearer_token` resource to generate valid tokens.

## Generated Configuration

The generated scrape configuration includes:

- Job name based on the alias
- Metrics path for the specified metric type and version
- Scheme (http/https) based on provider SSL configuration
- Bearer token (if provided)
- Static config with the MinIO server endpoint

Example output:
```yaml
scrape_configs:
  - job_name: minio-cluster
    metrics_path: /minio/metrics/v3?type=cluster
    scheme: https
    bearer_token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9...
    static_configs:
      - targets: ["minio.example.com:9000"]
```
