---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: ""
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Name}} ({{.Type}})

{{ .Description | trimspace }}

## Example Usage

```terraform
# Create a user first
resource "minio_iam_user" "example_user" {
  name = "example-user"
}

# Create an access key with default settings (auto-generated keys, enabled)
resource "minio_accesskey" "example" {
  user = minio_iam_user.example_user.name
}

# Create an access key with custom credentials
resource "minio_accesskey" "custom_key" {
  user               = minio_iam_user.example_user.name
  access_key         = "MINIO_ACCESS_KEY" # Must be 8-20 characters
  secret_key         = "mySuperSecretKey" # Must be at least 8 characters
  secret_key_version = "v1"               # Version identifier for change detection
  status            = "enabled"
}

# Create a disabled access key
resource "minio_accesskey" "disabled_key" {
  user   = minio_iam_user.example_user.name
  status = "disabled"
}

# Create an access key with a description
resource "minio_accesskey" "with_description" {
  user        = minio_iam_user.example_user.name
  description = "CI/CD deployment key"
}

# Create an access key and attach a policy directly (policy JSON)
resource "minio_accesskey" "with_policy" {
  user               = minio_iam_user.example_user.name
  access_key         = "EXAMPLEKEY1"
  secret_key         = "mySuperSecretKey"
  secret_key_version = "v1"
  status             = "enabled"
  policy             = jsonencode({
    Version = "2012-10-17"
    Statement = [
      {
        Effect   = "Allow"
        Action   = ["s3:GetObject"]
        Resource = ["arn:aws:s3:::my-bucket/*"]
      }
    ]
  })
}
```

## Policy format

The `policy` argument expects a JSON policy document. Use `jsonencode({...})` to define the policy inline as shown above. The provider sends this JSON to the MinIO Admin API.

{{ .SchemaMarkdown | trimspace }}

## Import

Import is supported using the following syntax:

```shell
# Access keys can be imported using the access key ID
terraform import minio_accesskey.example AKIAIOSFODNN7EXAMPLE
```

## Security Note

The `secret_key` is intentionally designed as write-only to avoid persisting sensitive credentials in Terraform state files. It is never exposed in state or outputs, including at creation time. When you provide a custom secret key, you must also provide a `secret_key_version` to enable change detection without storing the actual secret.

### Secret Key Rotation

To rotate a secret key:

1. Update both `secret_key` and `secret_key_version` in your configuration
2. Run `terraform apply`
3. The new secret will be set, but not stored in state

### Integration with Secret Management Systems

This design is particularly useful for integrating with secret management systems:

**HashiCorp Vault KV V2:**

```hcl
data "vault_kv_secret_v2" "minio_secret" {
  mount = "secret"
  name  = "minio/accesskey"
}

resource "minio_accesskey" "example" {
  user               = minio_iam_user.example_user.name
  secret_key         = data.vault_kv_secret_v2.minio_secret.data["secret_key"]
  secret_key_version = tostring(data.vault_kv_secret_v2.minio_secret.version)
}
```

**Using a hash for version tracking:**

```hcl
resource "minio_accesskey" "example" {
  user               = minio_iam_user.example_user.name
  secret_key         = var.secret_key
  secret_key_version = sha256(var.secret_key)
}
```
