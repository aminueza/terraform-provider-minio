---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: ""
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Name}} ({{.Type}})

{{ .Description | trimspace }}

## Example Usage

```terraform
resource "minio_s3_bucket" "bucket" {
  bucket = "bucket"
}

resource "minio_ilm_policy" "test_policy" {
  bucket = minio_s3_bucket.bucket.bucket

  rule {
    id     = "rule1"
    status = "Enabled"
    expiration = "90d"
    filter     = "documents/"
    tags = {
      environment = "test"
      type        = "document"
    }
  }

  rule {
    id     = "rule2"
    status = "Disabled"
    transition {
      days          = "30d"
      storage_class = "GLACIER"
    }
    filter = "backups/"
  }

  rule {
    id = "rule3"
    transition {
      date          = "2025-12-31"  # Example: transition on a specific date
      storage_class = "STANDARD_IA"
    }
    filter = "archives/"
  }

  rule {
    id = "rule4"
    noncurrent_transition {
      days           = "45d"
      storage_class  = "GLACIER"
      newer_versions = 3
    }
    filter = "versioned-data/"
  }

  rule {
    id = "rule5"
    noncurrent_expiration {
      days           = "365d"
      newer_versions = 5
    }
    filter = "old-versions/"
  }

  rule {
    id = "rule6"
    transition {
      days          = "60d"
      storage_class = "STANDARD_IA"
    }
    expiration = "180d"
    filter     = "logs/"
    tags = {
      retention = "short-term"
      type      = "logs"
    }
  }
}
```

## Important: One Resource Per Bucket

Each bucket must have exactly **one** `minio_ilm_policy` resource. All lifecycle rules for a bucket must be defined within a single resource. Creating multiple `minio_ilm_policy` resources for the same bucket will cause them to overwrite each other, leading to unexpected behavior.

**Incorrect** (rules will overwrite each other):

```terraform
resource "minio_ilm_policy" "daily_cleanup" {
  bucket = "my-bucket"
  rule {
    id         = "daily_cleanup"
    expiration = "14d"
    filter     = "daily/"
  }
}

resource "minio_ilm_policy" "weekly_cleanup" {
  bucket = "my-bucket"  # Same bucket - this will overwrite the above!
  rule {
    id         = "weekly_cleanup"
    expiration = "80d"
    filter     = "weekly/"
  }
}
```

**Correct** (all rules in one resource):

```terraform
resource "minio_ilm_policy" "my_bucket_lifecycle" {
  bucket = "my-bucket"

  rule {
    id         = "daily_cleanup"
    expiration = "14d"
    filter     = "daily/"
  }

  rule {
    id         = "weekly_cleanup"
    expiration = "80d"
    filter     = "weekly/"
  }
}
```

## Limitations

Abort-only lifecycle rules are not persisted by the MinIO server. If you configure a rule with only `abort_incomplete_multipart_upload`, the provider preserves that rule in Terraform state to avoid perpetual diffs, but it is not sent to the server. Combine it with at least one other action (e.g., `expiration` or `transition`) to persist on the server.

{{ .SchemaMarkdown | trimspace }}

## Import

Import is supported using the following syntax:

```shell
# ILM policies can be imported using the bucket name
terraform import minio_ilm_policy.example bucket-name
```
