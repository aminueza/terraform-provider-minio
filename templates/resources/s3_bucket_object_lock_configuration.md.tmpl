---
page_title: "{{.Type}} {{.Name}} - {{.ProviderName}}"
subcategory: ""
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Type}}: {{.Name}}

{{ .Description | trimspace }}

Cleaner alternative to `minio_s3_bucket_retention` with a nested schema structure that matches the API better.

## Differences from minio_s3_bucket_retention

- More intuitive naming
- Nested `rule { default_retention { } }` blocks instead of flat structure
- Explicit `object_lock_enabled` field
- Choose `days` or `years` in the same block

## Retention Modes

### GOVERNANCE
Users with `s3:BypassGovernanceRetention` can override the lock. Good for backups and internal policies where you might need escape hatches.

### COMPLIANCE
Strict mode - nobody can override, not even root. Can't delete or modify objects until retention expires. Use for regulatory requirements (SEC, FINRA, CFTC) and legal holds.

## Prerequisites

Object locking must be enabled at bucket creation. Can't add it later unless you're on MinIO RELEASE.2025-05-20T20-30-00Z+.

```hcl
resource "minio_s3_bucket" "example" {
  bucket         = "my-bucket"
  object_locking = true  # Must be true
}
```

## Example Usage

{{ tffile "examples/resources/minio_s3_bucket_object_lock_configuration/resource.tf" }}

## Common Uses

- Ransomware-proof backups (immutable)
- Financial records (SEC17a-4(f), FINRA 4511(c), CFTC 1.31)
- HIPAA medical records
- Audit logs and security compliance
- Legal holds for e-discovery

## Migrating from minio_s3_bucket_retention

```hcl
# Old (flat structure)
resource "minio_s3_bucket_retention" "old" {
  bucket          = "my-bucket"
  mode            = "GOVERNANCE"
  unit            = "DAYS"
  validity_period = 30
}

# New (nested structure)
resource "minio_s3_bucket_object_lock_configuration" "new" {
  bucket = "my-bucket"

  rule {
    default_retention {
      mode = "GOVERNANCE"
      days = 30
    }
  }
}
```

{{ .SchemaMarkdown | trimspace }}

## Notes

- Versioning is required (gets enabled automatically with object locking)
- Object locking can't be disabled once enabled
- Default retention applies to all new objects
- Per-object retention can override bucket defaults
- Deletes create markers instead of actually removing data during retention
